# üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º ‚Äî –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

**–í–æ–ø—Ä–æ—Å:** –Ø –º–µ–Ω—è—é `data/portfolio.json` –≤—Ä—É—á–Ω—É—é, –Ω–æ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –¥–∞–Ω–Ω—ã–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è.

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–µ—Å—Ç—ã API –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –ø–æ—Ä—Ç—Ñ–µ–ª—è.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

**–ò–°–ü–†–ê–í–õ–ï–ù–û!** –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –∏ –ù–ï —Ç—Ä–æ–≥–∞—é—Ç `data/portfolio.json`.

---

## üéØ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º

### –°–ø–æ—Å–æ–± 1: –°–∫—Ä–∏–ø—Ç manage_portfolio.py (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

#### –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å
```bash
python manage_portfolio.py show
```

#### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ)
```bash
python manage_portfolio.py create
```

–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:
```
–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è [–ú–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å]: –û—Å–Ω–æ–≤–Ω–æ–π
–í–∞–ª—é—Ç–∞ [RUB]: RUB
–°–≤–æ–±–æ–¥–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ [0]: 50000

–î–æ–±–∞–≤—å—Ç–µ –ø–æ–∑–∏—Ü–∏–∏:
  –¢–∏–∫–µ—Ä: SBER
  –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 100
  –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏: 265.30
  –ó–∞–º–µ—Ç–∫–∏: –ì–æ–ª—É–±—ã–µ —Ñ–∏—à–∫–∏
  [OK] –î–æ–±–∞–≤–ª–µ–Ω–æ: SBER x 100 @ 265.30

  –¢–∏–∫–µ—Ä: GAZP
  –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 50
  –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏: 120.00
  –ó–∞–º–µ—Ç–∫–∏:
  [OK] –î–æ–±–∞–≤–ª–µ–Ω–æ: GAZP x 50 @ 120.00

  –¢–∏–∫–µ—Ä: [Enter –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è]
```

#### –°–æ–∑–¥–∞—Ç—å –∏–∑ —à–∞–±–ª–æ–Ω–∞
```bash
python manage_portfolio.py template
```

–°–æ–∑–¥–∞—Å—Ç –≥–æ—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä —Å 3 –ø–æ–∑–∏—Ü–∏—è–º–∏.

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
```bash
python manage_portfolio.py edit
```

–ú–µ–Ω—é:
```
1. –ù–∞–∑–≤–∞–Ω–∏–µ
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
3. –£–¥–∞–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
4. –ò–∑–º–µ–Ω–∏—Ç—å cash
```

---

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ REST API

```bash
curl -X POST http://localhost:8000/api/portfolio \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–ú–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å",
    "currency": "RUB",
    "cash": 50000,
    "positions": [
      {"symbol": "SBER", "quantity": 100, "avg_price": 265.30},
      {"symbol": "GAZP", "quantity": 50, "avg_price": 120.00}
    ]
  }'
```

–ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
curl http://localhost:8000/api/portfolio/view
```

---

### –°–ø–æ—Å–æ–± 3: Python —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–π—Ç–µ `my_portfolio.py`:

```python
from app.store.io import save_portfolio
from datetime import datetime

my_portfolio = {
    "name": "–ú–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å",
    "currency": "RUB",
    "cash": 50000.0,
    "positions": [
        {
            "symbol": "SBER",
            "quantity": 100,
            "avg_price": 265.30,
            "market": "moex",
            "type": "stock"
        },
        {
            "symbol": "LKOH",
            "quantity": 10,
            "avg_price": 6000.00,
            "market": "moex",
            "type": "stock"
        }
    ],
    "created_at": datetime.now().isoformat(),
    "updated_at": datetime.now().isoformat()
}

save_portfolio(my_portfolio)
print("‚úì –ü–æ—Ä—Ç—Ñ–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ data/portfolio.json")
```

–ó–∞–ø—É—Å–∫:
```bash
python my_portfolio.py
```

---

## ‚ö†Ô∏è –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

### ‚ùå –ù–ï —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–û—Ç–∫—Ä—ã–ª–∏ data/portfolio.json –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
‚Üí –ò–∑–º–µ–Ω–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ
‚Üí –°–æ—Ö—Ä–∞–Ω–∏–ª–∏
‚Üí –ó–∞–ø—É—Å—Ç–∏–ª–∏ pytest tests/
‚Üí –î–∞–Ω–Ω—ã–µ —Å–±—Ä–æ—Å–∏–ª–∏—Å—å! üò¢
```

**–ü–æ—á–µ–º—É:** –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç—ã –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª–∏ —Ñ–∞–π–ª.

**–°–µ–π—á–∞—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ! –¢–µ—Å—Ç—ã –±–æ–ª—å—à–µ –Ω–µ —Ç—Ä–æ–≥–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª.

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –¢–µ—Å—Ç 1: –†—É—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ + —Ç–µ—Å—Ç—ã

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ—Ä—Ç—Ñ–µ–ª—å
python manage_portfolio.py template

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–æ–∑–¥–∞–ª—Å—è
python manage_portfolio.py show

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
pytest tests/test_api.py -v

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª—Å—è
python manage_portfolio.py show
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ—Ä—Ç—Ñ–µ–ª—å –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π! ‚úÖ

### –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ API

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
python run_server.py

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
curl -X POST http://localhost:8000/api/portfolio \
  -H "Content-Type: application/json" \
  -d '{"currency":"RUB","positions":[{"symbol":"SBER","quantity":200}]}'

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
python manage_portfolio.py show
```

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **manage_portfolio.py**

### –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **REST API**

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Python –∫–æ–¥** —Å `save_portfolio()`

### –î–ª—è —Ç–µ—Å—Ç–æ–≤:
‚úÖ –¢–µ—Å—Ç—ã **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏** (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)

---

## üéØ –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** 

–¢–µ–ø–µ—Ä—å:
- ‚úÖ –¢–µ—Å—Ç—ã –ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç `data/portfolio.json`
- ‚úÖ –ï—Å—Ç—å —É–¥–æ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `manage_portfolio.py`
- ‚úÖ –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç –∏–ª–∏ API
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (65/65)

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
```bash
python manage_portfolio.py show      # –ü—Ä–æ—Å–º–æ—Ç—Ä
python manage_portfolio.py create    # –°–æ–∑–¥–∞–Ω–∏–µ
python manage_portfolio.py edit      # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [docs/portfolio.md](docs/portfolio.md)

